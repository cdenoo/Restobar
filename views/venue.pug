extends basiclayout

block headcontent
    style.
        html, body {
            height: 100%;
        }
        h1{
            text-align: center;
            font-size: 3em;
            margin-top: 0.75em;
        }
        span.name{
            color: #000;
            display: inline-block;
            margin-right: 1em;
        }
        #details .tag {
            font-weight: bold;
        }
        #details div {
            margin: 0.25em 0;
        }
        #googlemap {
            height: 500px;
        }
        #googlemap * {
            overflow: visible;
        }
        .review{
            -webkit-border-radius: 20px;
            -moz-border-radius: 20px;
            border-radius: 20px;
            border: solid 1px #7a3d13;
            overflow: hidden;
        }
        .review .writer{
            background-color: #7a3d13;
            padding: 1em;
            color: #FFF;
        }
        .review .writer .name{
            display-inline: block;
            padding-left: 1em;
            color: #FFF;
        }
        .review .content{
            text-align: justify;
            padding: 1em;
        }

    include includes/google-maps.pug
    script(src='/scripts/map.js')


block bodycontent

    - var noRating = false;
    - var rating = 3.5; //TODO replace with real rating

    .col-md-6.col-lg-4.col-centered
        h1
            span.name
                | #{venueData.name}

            if noRating
                - var n = 1;
                while n <= 5
                    i.fa.fa-question-circle-o(aria-hidden='true')
            else
                - var n = 1;
                while n <= rating
                    - n++;
                    i.fa.fa-star(aria-hidden='true')

                - var showHalfStar = ((rating.toFixed(1) % 0.5) % 2) == 0
                if showHalfStar
                    i.fa.fa-star-half-o(aria-hidden='true')

                - var starsLeft = 5 - n;
                while starsLeft >= 1
                    - starsLeft--;
                    i.fa.fa-star-o(aria-hidden='true')

        h2 Details

        #details.row
            .col-md-6
                .row
                    .col-xs-4.tag Name:
                    .col-xs-8 #{venueData.name}
                    .col-xs-4.tag Address:
                    .col-xs-8.
                        #{venueData.street} #{venueData.house_number} <br>
                        #{venueData.postal_code} #{venueData.city} <br>
                        #{venueData.country}
                    .col-xs-4.tag Phone:
                    .col-xs-8 #{venueData.phone_number}
                    .col-xs-4.tag Email:
                    .col-xs-8 #{venueData.email}
            .col-md-6
                .tag Opening Hours:
                div !{venueData.opening_hours.replace(/\n/g, '<br/>')}

    #googlemap

    .col-md-6.col-lg-4.col-centered
        h2 Reviews

        .review
            .writer
                if noRating
                    - var n = 1;
                    while n <= 5
                        i.fa.fa-question-circle-o(aria-hidden='true')
                else
                    - var n = 1;
                    while n <= rating
                        - n++;
                        i.fa.fa-star(aria-hidden='true')

                    - var showHalfStar = ((rating.toFixed(1) % 0.5) % 2) == 0
                    if showHalfStar
                        i.fa.fa-star-half-o(aria-hidden='true')

                    - var starsLeft = 5 - n;
                    while starsLeft >= 1
                        - starsLeft--;
                        i.fa.fa-star-o(aria-hidden='true')

                span.name Thijs Spinoy

                span.date November 11, 2016

            .content
                p Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec pellentesque lorem eu risus eleifend ultrices. Nam iaculis ex urna, tincidunt dapibus nibh faucibus sed. Vestibulum condimentum venenatis odio, vel dignissim elit venenatis vitae. Nam quis dapibus orci. Nam sem tellus, venenatis vel aliquam et, pharetra ac metus. Curabitur hendrerit ipsum et enim sagittis, in tristique ante pharetra. Praesent blandit molestie nisi quis convallis. Praesent condimentum blandit orci vel commodo. Ut iaculis blandit consectetur. Duis pellentesque arcu in leo tincidunt mattis ut ut erat. Donec imperdiet ipsum a ante euismod, id accumsan magna consequat. Fusce in odio arcu. Cras dictum purus magna, non porttitor neque tempus eget. Sed et bibendum enim. Maecenas eu maximus orci. Fusce egestas dui at dolor aliquam tincidunt.
    - console.log(venueData.y_coordinate);
    script.
         $(function(){
            createMap(false);
            createMarker(#{venueData.y_coordinate}, #{venueData.x_coordinate}, '#{venueData.name}');
            setMapCenter(#{venueData.y_coordinate}, #{venueData.x_coordinate});
         });